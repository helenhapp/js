<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <title>–í–∏—Ä–æ—Å—Ç–∏ –î—Ä–∞–∫–æ–Ω–∞</title>
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />

    <style>
      /* =========================================
   GLOBAL VARIABLES
========================================= */
      :root {
        /* Backgrounds */
        --bg: #0a1030;
        --panel: #0d1440;
        --panel-alt: #102159;
        --hover-bg: #16327b;
        --code-bg: #0e1a4d;

        /* Text */
        --text-main: #d6ecff;
        --text-soft: #a9dcff;
        --title: #78c7ff;

        /* Borders & accents */
        --accent: #4fa7ff;

        /* Effects */
        --shadow-accent: rgba(79, 167, 255, 0.25);
        --title-glow: rgba(120, 199, 255, 0.6);

        /* Layout sizes */
        --panel-width: 420px;
        /* --dragon-size: 100px; */
      }

      /* =========================================
   RESET
========================================= */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      /* =========================================
   PAGE LAYOUT
========================================= */
      body {
        margin: 0;
        padding: 0;
        background: var(--bg);
        color: var(--text-main);
        font-family: Arial, sans-serif;

        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100dvh !important;
        min-width: 100dvw !important;
      }

      /* =========================================
   GAME PANEL
========================================= */
      .panel {
        width: var(--panel-width);
        padding: 25px;

        background: var(--panel);
        border-radius: 20px;
        border: 2px solid var(--accent);

        box-shadow: 0 0 20px var(--shadow-accent);
      }

      /* =========================================
   TITLE
========================================= */
      h1 {
        margin-top: 0;
        text-align: center;
        font-size: 35px;
        color: var(--title);
        text-shadow: 0 0 8px var(--title-glow);
      }

      /* =========================================
   DRAGON DISPLAY
========================================= */
      #dragon {
        font-size: 100px;
        text-align: center;
        margin: 10px 0;
      }

      /* =========================================
   STATUS BARS
========================================= */
      .stat-label {
        margin-bottom: 5px;
        color: var(--text-soft);
      }

      .stat-bar {
        background: var(--panel-alt);
        height: 14px;
        margin-bottom: 10px;
        border-radius: 10px;
        overflow: hidden;
      }

      .stat-fill {
        height: 100%;
        background: var(--accent);
        transition: width 0.3s;
      }

      /* =========================================
   BUTTONS
========================================= */
      button {
        cursor: pointer;
        font: inherit;

        width: 48%;
        padding: 12px;
        margin-top: 10px;

        background: var(--panel-alt);
        border: 2px outset var(--accent);
        border-radius: 6px;

        color: var(--text-main);
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
      }

      button:hover {
        background: var(--hover-bg);
        color: var(--text-soft);
      }
      button:active {
        transform: scale(0.97);
      }

      /* =========================================
   MESSAGES & INFORMATION
========================================= */
      #message {
        height: 18px;
        text-align: center;
        color: var(--title);
        margin-top: 5px;
      }

      #age {
        text-align: center;
        font-size: 12px;
        color: var(--text-soft);
      }

      /* =========================================
   GAME OVER PANEL
========================================= */
      #game-over {
        display: none;
        margin-top: 15px;
        padding: 10px;

        background: var(--hover-bg);
        border: 1px solid var(--title);
        border-radius: 10px;
        text-align: center;
      }

      @media (max-width: 700px) {
        .panel {
          width: 90%;
        }
      }
    </style>
  </head>

  <body>
    <div class="panel">
      <h1>–í–∏—Ä–æ—Å—Ç–∏ –î—Ä–∞–∫–æ–Ω–∞</h1>

      <p style="text-align: center; font-size: 14px">
        –°—Ç–∞–¥—ñ—è: <span id="stage-name">–Ø–π—Ü–µ</span>
      </p>

      <div id="dragon">ü•ö</div>

      <div class="stat-label">–°–∏—Ç—ñ—Å—Ç—å</div>
      <div class="stat-bar">
        <div id="hunger" class="stat-fill" style="width: 100%"></div>
      </div>

      <div class="stat-label">–©–∞—Å—Ç—è</div>
      <div class="stat-bar">
        <div id="happiness" class="stat-fill" style="width: 100%"></div>
      </div>

      <div style="display: flex; justify-content: space-between">
        <button id="feed">üçï –ì–æ–¥—É–≤–∞—Ç–∏</button>
        <button id="play">üèÄ –ì—Ä–∞—Ç–∏—Å—è</button>
      </div>

      <p id="message"></p>

      <p id="age">–í—ñ–∫: 0 c</p>

      <div id="game-over"></div>
    </div>

    <script>
      // =========================================================
      //   –ö–õ–ê–° –î–†–ê–ö–û–ù–ê (OOP) ‚Äì –º—ñ—Å—Ç–∏—Ç—å —É—Å—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Ç–∞ –ª–æ–≥—ñ–∫—É
      // =========================================================

      class Dragon {
        constructor() {
          // –ü–æ—Ç–æ—á–Ω–∞ —Å—Ç–∞–¥—ñ—è —Ä–æ–∑–≤–∏—Ç–∫—É (0 = —è–π—Ü–µ)
          this.stage = 0;

          // –°—Ç–∞—Ç—É—Å–∏ ‚Äî 100 —Ü–µ –º–∞–∫—Å–∏–º—É–º
          this.hunger = 100; // –°–∏—Ç—ñ—Å—Ç—å
          this.happiness = 100; // –©–∞—Å—Ç—è

          this.age = 0; // –í—ñ–∫ (—É —Å–µ–∫—É–Ω–¥–∞—Ö –≥—Ä–∏)
          this.isFinished = false; // –ü—Ä–∞–ø–æ—Ä–µ—Ü—å –∫—ñ–Ω—Ü—è –≥—Ä–∏

          // –ú–∞—Å–∏–≤ —Å—Ç–∞–¥—ñ–π —Ä–æ–∑–≤–∏—Ç–∫—É
          this.stages = [
            { name: "–Ø–π—Ü–µ", emoji: "ü•ö", time: 10 },
            { name: "–î–∏—Ç–∏–Ω—á–∞", emoji: "ü¶é", time: 30 },
            { name: "–Æ–Ω–∏–π –î—Ä–∞–∫–æ–Ω", emoji: "üêâ", time: 60 },
            { name: "–î–æ—Ä–æ—Å–ª–∏–π", emoji: "üê≤", time: 90 }, // –ø—ñ—Å–ª—è —Ü—ñ—î—ó —Å—Ç–∞–¥—ñ—ó –≥—Ä–∞ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è
          ];
        }

        // ---------------------------
        //   –î–Ü–á –ì–†–ê–í–¶–Ø
        // ---------------------------

        // –ì–æ–¥—É–≤–∞—Ç–∏ –¥—Ä–∞–∫–æ–Ω–∞
        feed() {
          if (this.isFinished) return;
          this.hunger = Math.min(100, this.hunger + 15);
          showMessage("–î—Ä–∞–∫–æ–Ω —Å–∏—Ç–∏–π!");
        }

        // –ì—Ä–∞—Ç–∏—Å—è –∑ –¥—Ä–∞–∫–æ–Ω–æ–º
        play() {
          if (this.isFinished) return;
          this.happiness = Math.min(100, this.happiness + 15);
          this.hunger = Math.max(0, this.hunger - 3);
          showMessage("–î—Ä–∞–∫–æ–Ω —â–∞—Å–ª–∏–≤–∏–π!");
        }

        // ---------------------------
        //   –û–ù–û–í–õ–ï–ù–ù–Ø –°–¢–ê–ù–£ –î–†–ê–ö–û–ù–ê
        //   –í–ò–ö–õ–ò–ö–ê–Ñ–¢–¨–°–Ø –ö–û–ñ–ù–Ü X —Å–µ–∫—É–Ω–¥ (setInterval)
        // ---------------------------

        update() {
          if (this.isFinished) return;

          // –ö–æ–∂–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è ‚Äî —Ü–µ –æ–¥–Ω–∞ "—Å–µ–∫—É–Ω–¥–∞" —á–∞—Å—É –≥—Ä–∏
          this.age++;

          // –ü–æ—Å—Ç—É–ø–æ–≤–µ –∑–º–µ–Ω—à–µ–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤ (—à—Ç—É—á–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å)
          this.hunger -= 3.5;
          this.happiness -= 3;

          // –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—É —Å—Ç–∞–¥—ñ—é —Ä–æ–∑–≤–∏—Ç–∫—É
          if (
            this.age >= this.stages[this.stage].time &&
            this.stage < this.stages.length - 1
          ) {
            this.stage++;
            showMessage("üéâ –ù–æ–≤–∏–π –µ—Ç–∞–ø —Ä–æ–∑–≤–∏—Ç–∫—É!");
          }

          // –Ø–∫—â–æ –¥–æ—Å—è–≥–Ω—É—Ç–∞ —Ñ—ñ–Ω–∞–ª—å–Ω–∞ —Å—Ç–∞–¥—ñ—è ‚Äî –¥—Ä–∞–∫–æ–Ω —ñ–¥–µ —É —Å–≤—ñ—Ç
          if (
            this.stage === this.stages.length - 1 &&
            this.age >= this.stages[3].time
          ) {
            this.leave();
          }

          // –°–º–µ—Ä—Ç—å (–∫–æ–ª–∏ —Å–∏—Ç—ñ—Å—Ç—å –∞–±–æ —â–∞—Å—Ç—è –¥–æ—Å—è–≥–∞—é—Ç—å –Ω—É–ª—è)
          if (this.hunger <= 0 || this.happiness <= 0) {
            this.die();
          }
        }

        // ---------------------------
        //   –°–ú–ï–†–¢–¨ –î–†–ê–ö–û–ù–ê
        // ---------------------------
        die() {
          this.isFinished = true;
          dragonEl.textContent = "üíÄ"; // –ó–º—ñ–Ω—é—î–º–æ emoji –Ω–µ–≥–∞–π–Ω–æ

          // –¢—Ä–æ—Ö–∏ —á–µ–∫–∞—î–º–æ –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º "–∫—ñ–Ω–µ—Ü—å –≥—Ä–∏",
          // —â–æ–± –≥—Ä–∞–≤–µ—Ü—å –ø–æ–±–∞—á–∏–≤ üíÄ
          setTimeout(() => {
            gameOver("–í–∞—à –¥—Ä–∞–∫–æ–Ω –∑–∞–Ω–∞–¥—Ç–æ –æ—Å–ª–∞–±... üò¢");
          }, 700);
        }

        // ---------------------------
        //   –î–†–ê–ö–û–ù –í–ò–õ–Ü–¢–ê–Ñ –£ –í–°–ï–°–í–Ü–¢
        // ---------------------------
        leave() {
          this.isFinished = true;
          dragonEl.textContent = "üåå"; // –ó–º—ñ–Ω—é—î–º–æ emoji

          setTimeout(() => {
            gameOver("–í–∞—à –¥—Ä–∞–∫–æ–Ω –≤–∏—Ä—ñ—Å —ñ –ø–æ–ª–µ—Ç—ñ–≤ –¥–æ—Å–ª—ñ–¥–∂—É–≤–∞—Ç–∏ –≤—Å–µ—Å–≤—ñ—Ç! ‚ú®");
          }, 700);
        }
      }

      // =========================================================
      //   –°–¢–í–û–†–ï–ù–ù–Ø –î–†–ê–ö–û–ù–ê
      // =========================================================

      const dragon = new Dragon();

      // =========================================================
      //   –ï–õ–ï–ú–ï–ù–¢–ò –Ü–ù–¢–ï–†–§–ï–ô–°–£
      // =========================================================

      const dragonEl = document.getElementById("dragon");
      const stageEl = document.getElementById("stage-name");
      const hungerEl = document.getElementById("hunger");
      const happyEl = document.getElementById("happiness");
      const ageEl = document.getElementById("age");
      const msgEl = document.getElementById("message");
      const gameOverEl = document.getElementById("game-over");

      // –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
      document.getElementById("feed").onclick = () => {
        dragon.feed();
        updateUI();
      };

      document.getElementById("play").onclick = () => {
        dragon.play();
        updateUI();
      };

      // =========================================================
      //   –í–ò–í–ï–î–ï–ù–ù–Ø –ö–û–†–û–¢–ö–ò–• –ü–û–í–Ü–î–û–ú–õ–ï–ù–¨
      // =========================================================

      function showMessage(text) {
        msgEl.textContent = text;
        setTimeout(() => (msgEl.textContent = ""), 2000);
      }

      // =========================================================
      //   –ö–Ü–ù–ï–¶–¨ –ì–†–ò
      // =========================================================

      function gameOver(text) {
        gameOverEl.style.display = "block";
        gameOverEl.textContent = text;
      }

      // =========================================================
      //   –û–ù–û–í–õ–ï–ù–ù–Ø –Ü–ù–¢–ï–†–§–ï–ô–°–£
      // =========================================================

      function updateUI() {
        // –Ø–∫—â–æ –≥—Ä–∞ –Ω–µ –∑–∞–∫—ñ–Ω—á–µ–Ω–∞ ‚Äî –æ–Ω–æ–≤–ª—é—î–º–æ –≤–∏–≥–ª—è–¥ –¥—Ä–∞–∫–æ–Ω–∞
        if (!dragon.isFinished) {
          const s = dragon.stages[dragon.stage];

          dragonEl.textContent = s.emoji;
          stageEl.textContent = s.name;
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–º—É–∂–æ–∫ —Å—Ç–∞—Ç—É—Å—ñ–≤
        hungerEl.style.width = dragon.hunger + "%";
        happyEl.style.width = dragon.happiness + "%";

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–∫—É
        ageEl.textContent = "–í—ñ–∫: " + dragon.age + " c";
      }

      // =========================================================
      //   –ì–û–õ–û–í–ù–ò–ô –Ü–ì–†–û–í–ò–ô –¶–ò–ö–õ (setInterval)
      // =========================================================
      //
      //  –ß–û–ú–£ –í–ò–ö–û–†–ò–°–¢–û–í–£–Ñ–¢–¨–°–Ø setInterval?
      //
      //  setInterval –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é update() –∫–æ–∂–Ω—ñ 1200 –º—Å,
      //  —Å—Ç–≤–æ—Ä—é—é—á–∏ "–ø—É–ª—å—Å –≥—Ä–∏". –¶–µ —è–∫ —Ç—ñ–∫–∞–Ω–Ω—è –≥–æ–¥–∏–Ω–Ω–∏–∫–∞.
      //
      //  –ö–æ–∂–µ–Ω —Ç—ñ–∫:
      //    ‚Ä¢ –∑–±—ñ–ª—å—à—É—î –≤—ñ–∫ –¥—Ä–∞–∫–æ–Ω–∞
      //    ‚Ä¢ –∑–º–µ–Ω—à—É—î —Å–∏—Ç—ñ—Å—Ç—å —Ç–∞ —â–∞—Å—Ç—è
      //    ‚Ä¢ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –Ω–∞—Å—Ç–∞–≤ —á–∞—Å –µ–≤–æ–ª—é—Ü—ñ—ó
      //    ‚Ä¢ –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –Ω–µ –Ω–∞—Å—Ç–∞–≤ —á–∞—Å —Å–º–µ—Ä—Ç—ñ
      //    ‚Ä¢ –æ–Ω–æ–≤–ª—é—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
      //
      //  –ë–µ–∑ setInterval() –≥—Ä–∞ –± –Ω–µ –±—É–ª–∞ "–∂–∏–≤–æ—é"
      //  ‚Äî –Ω—ñ—á–æ–≥–æ –± –Ω–µ –∑–º—ñ–Ω—é–≤–∞–ª–æ—Å—è –∑ —á–∞—Å–æ–º.
      //

      setInterval(() => {
        dragon.update();
        updateUI();
      }, 1200);

      // –ü–æ—á–∞—Ç–∫–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
      updateUI();
    </script>
  </body>
</html>
